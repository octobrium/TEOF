# Idle Pickup Analysis â€” 2025-09-18T20:32Z

## Observations
- `python -m tools.agent.bus_status` already reports active claims, latest events, and manager heartbeat warnings, but the CLI does not surface which tasks are ready for pickup.
- After seeding new tasks (QUEUE-037..039), we had to run `task_assign` manually for each engineer; auto-claim kicked in only after assignment.
- Idle agents currently rely on manager pings or manual review of `_bus/messages/manager-report.jsonl` to find work, leading to delays.

## Desired Behaviour
- When an agent goes idle (no active claims), they should be able to run a single command that:
  1. Scans `_bus/assignments/*.json` for unclaimed tasks or tasks assigned to them without an active claim.
  2. Optionally auto-claims the highest priority item (with opt-out).
  3. Prints queue context (description, plan id) so the agent can confirm suitability before proceeding.
- Managers should be able to run the same helper to auto-assign idle agents based on priority without repeating `task_assign` manually.

## Integration Points
- Extend `tools/agent/bus_status` or introduce a new helper (e.g., `tools/agent/idle_pickup.py`) that reads assignments and claim state to propose next actions.
- Leverage existing data structures: `_bus/assignments`, `_bus/claims`, and `queue/*.md` metadata to show notes/OCERS targets.
- Reuse auto-claim logic from `task_assign` when the helper decides to assign automatically.

## Next Steps
1. Build `tools/agent/idle_pickup.py` CLI:
   - `list` mode: show unclaimed tasks (optionally filter by agent or priority).
   - `claim` mode: auto-run `task_assign` or `bus_claim` based on manager/engineer role.
2. Add tests covering idle detection, auto-claim, and opt-out flows.
3. Update docs (`docs/parallel-codex.md`, `docs/AGENTS.md`) with the new workflow and broadcast via manager-report.

